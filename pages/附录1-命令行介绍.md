# 附录1 命令行介绍

对于一些初学者，可能不是很了解命令行这个工具。所以在这里我简单的讲解下

命令行的其他名字

* 命令行工具
* 终端或Terminal (MacOS/Linux)
* CMD (Windows) 
* CLI (Command Line Interface)

命令行是一个基于命令的(字符的)用户交互环境, 与之对应的是基于图形界面的用户交互环境(GUI)。前者通过命令行与用户交互，使用的人输入以字符构成的命令，系统通过显示字符方式展示执行命令的过程和结果。后者则使用的图形界面，我们使用的所有APP，电脑上的软件，只要有窗口，有按钮，这些就是基于图形界面的交互。

## 如何打开命令行

* 在Windows中通过<kbd>Windows</kbd>+<kbd>R</kbd>打开`运行`，输入`cmd`后点击确定
* 在macOS中，可以直接在应用程序中搜索`终端`或`terminal`

## 命令行与图形用户界面的优劣对比

命令行相比图形用户界面的优势

* 出现早，早期的操作系统没有图形用户界面，都是通过命令行操作和使用
* 资源占用少，基于命令行的软件开发省掉图形开发的麻烦
* 方便远程控制，远程桌面传输的数据较多，远程命令行传输的数据量更少

命令行相比图形用户界面的劣势

* 基于字符的交互形式，没有图形界面通过鼠标点击方便
* 图形用户界面展示内容更丰富，用户体验更好

基于以上原因，普通人能够使用的软件都是基于图形用户界面的，而基于命令行的并没有被淘汰，它广泛用于服务器系统和嵌入式系统中。一般是软件工程师和运维工程师在使用。

## 命令（Command）

### 命令到底是什么？

命令其实就能够在命令行中执行的应用程序，只是在命令行中我们更习惯叫它为命令(Command)

### 命令行中输入命令的结构

无论是什么命令，在命令行中，输入执行的内容是有规范的。

```
<命令名称> [参数]...
```

`<>`和`[]`都表示占位符，`<>`表示必须有,`[]`表示可以有，可以没有，`...`表示前面的内容可以重复多个，

总结一下

* 一条命令应该至少包含一个`命令名称`，来告诉命令行要执行哪个命令
* `命令名称`后以空格分隔，可以跟随0到多个`参数`。`参数`与`命令名称`，`参数`与`参数`之间至少使用一个空格分隔。多个空格不影响。你可以把`参数`当成选项。`参数`的作用是让命令行在启动对应命令的时候，传递给命令这些`参数`（选项），让那个命令知道用户到底想做什么。

还是没有理解，没关系，我们来举例子

比如以下命令

```bash
node
```

上面这个命令的可执行文件是`node`，并且没有`参数`。命令会启动`node`命令，并告诉`node`，没有任何参数，于是`node`就进入了Node REPL，并等待用户输入 JavaScript 代码。

```bash
node -v
```

上面这个命令的命令名称叫`node`，带有一个参数`-v`，命令行会启动node命令，并告诉node，有一个参数叫`-v`，node了解到有一个`-v`的参数存在，就表示用户是想知道node的版本号，于是便输出node的版本号。

### 参数

有没有参数跟命令行没有关系，参数是由具体的命令早就定义好的，参数存在的意义是，有些命令存在多个功能，比如`node`，`node`可以启动Node REPL，也可以查询Node的版本号，还可以执行一个JS文件，那么，我们怎么才能告诉`node`应该执行什么操作呢，那就是参数。这些参数也是`node`自己规定好的，没有参数则进入Node REPL，有参数`-v`则显示版本号。


### 练习

指出以下命令中，命令名称，参数分别是什么?

```bash
ls
```

```bash
ls -l -a
```

```bash
node hello.js
```

```bash
tar -zxvf
```

```bash
cd Desktop
```

```bash
git push -u origin master
```

## 命令行执行命令的流程

这里我们主要是要了解，命令行执行命令的流程。

基本流程是这样的：

1. 打开命令行后，命令行就会进入“等待输入命令”状态
2. 输入命令并按<kbd>↲ 回车</kbd>提交命令
3. 命令行执行命令
4. 命令执行完毕后，命令行进入“等待输入命令状态”

分不同的角色表示流程（缩进的部分表示内部流程）：

```
1. 命令行：等待输入命令
2. 用户： 输入命令“xxx” 
3. 命令行：执行"xxx"
	3.1 xxx: 执行中
	3.2 xxx: 执行完毕退出
4. 命令行：等待输入命令 
```
`1`，`2`，`3`，`4`是命令行交互流程，`3.1`,`3.2`是命令内部流程

### 具体分析

执行命令：

```
node -v
```

流程分析：

```
1. 命令行：等待输入命令
2. 用户：输入命令“node -v”
3. 命令行：执行"node -v"
	3.1: node: 有-v参数，输出版本号
	3.2: node: 执行完毕，退出
4. 命令行：等待输入命令 
```

执行以下命令：

```
node
```

流程分析：

```
1 命令行: 等待命令输入
2 用户: 输入命令 node
3 命令行: 执行node命令
	3.1 node:  没有参数，开启Node REPL
	3.2 node:  等待输入JavaScript代码
	3.3 用户:   输入 console.log("Hello world")
	3.4 node:  执行console.log("Hello world")
	3.5 node:  等待输入JavaScriopt代码
	.
	.
	.
	3.x   用户:  输入 .exit
	3.x+1 node: 执行完毕，退出
4 命令会: 等待命令输入
```

`1`, `2`, `3`, `4`是命令行流程，`3.1`到`3.x+1`是Node REPL流程。

## 命令行交互环境与命令内部交互环境的区分

在使用`node`命令进入到Node REPL时，其实是进入到`node`的内部交互环境。对于初学者，有时候会搞不清当前命令行是在等待输入命令状态还是处于某个命令的内部交互环境，有些人直接在命令行交互环境里直接写 JavaScript 代码，也有人直接在Node REPL中写命令。下面我就教大家一些方法来判断。

1. 通过输入提示来判断

    比如在Windows中，处于命令行交互环境中的话，一般会这么显示：
    
    ```
    C:\Users\Administrator>
    ```
    
    可以看出提示内容的基本结构是`盘符:路径>`

    在MacOS中，，处于命令行交互环境中的话，一般会这么显示：
    
    ```
    macbookAir:~ Desktop $
    ```
    
    它结构是`设备名:路径 $`

    当然，这个显示内容其实可以根据我们的配置来更改，有些更改过命令行配置的，就不会按照以上格式显示输入提示

2. 通过命令行标题判断

    命令行窗口的顶部会显示当前状态，如果正在执行某个命令，则会显示命令相关信息。
    
    在Windows中，处于命令行交互环境时，标题一般会包含`cmd`，否则应该是有相关执行命令的信息。
    
    在MacOS/Linux中，处于命令行交互环境时，标题一般会包含`bash`，否则应该是有相关执行命令的信息。

## 如何终止正在执行的命令

我们执行`node`命令时，进入到了Node REPL，其实就是node这命令正在执行中，如果我们想要终止node的运行，可以在Node REPL中输入`.exit`退出。

那么其他正在执行的命令如何退出呢。其实有一个万能快捷键，那就是<kbd>Ctrl</kbd>+<kbd>D</kbd>，这个快捷键可以强制终止正在命令行中运行的命令，并返回到命令行交互环境。

在某些命令中可能在快捷键在第一次使用时并不会终止命令的执行，可以多次尝试按下此快捷键。

<kbd>Ctrl</kbd>+<kbd>D</kbd>和`.exit`的区别。

* <kbd>Ctrl</kbd>+<kbd>D</kbd>是命令行工具自带的功能，可作用于所有命令行上执行的命令。
* `.exit`是Node REPL的内部命令，对于非Node REPL中使用则无效。


## 工作目录（Work Directory）

先解释下"目录"，所谓的“目录”就是指文件夹。

工作目录是指当前命令行所处的目录(文件夹)，命令行打开后，默认的工作路径是用户主目录，在*Windows*中一般是`C:\Users\<用户名>`，`<用户名>`就是你的实际系统账号用户名。

工作目录决定了执行命令的位置。所以如果我们执行的一个命令需要指定一个文件时，最方便的方式就是把工作目录切换到该文件所在的目录，然后输入完整文件名便可指定该文件。

### 切换工作目录

使用`cd`命令可以切换工作目录

常用操作

当前工作目录下名为`javascript`的文件夹内

```bash
cd javascript
```

切换到当前工作目录的上一层目录

```bash
cd ..
```

切到到多级子目录，使用目录分隔符，在*Windows*中为`\`，在macOS和Linux中为`/`

切换到当前工作目录下的work目录下的today目录。

```bash
cd work\today
```


在*Windows*中切换到其他盘的目录需要先切换到对应盘，使用`<盘符>:`即可

比如要当前工作目录在`C:\Users\John`，需要切换到`F:\Documents\work`

```bash
F:
cd Documents\work
```

### 浏览文件和文件夹

*Windows*

* `dir` 展示当前工作目录下的文件和文件夹
* `dir work` 展示当前工作目录下的`work`文件夹下的文件和文件夹信息


*macOS* / *Linux*

* `ls` 展示当前工作目录下的文件和文件夹
* `ls work` 展示当前工作目录下的`work`文件夹下的文件和文件夹信息

[首页](../README.md)